<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GAG Pet Age Calculator with Live XP Bar</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron&family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg-color: #121212;
      --text-color: #f1f1f1;
      --heading-color: #00e0ff;
      --subheading-color: #aaa;
      --input-bg: #1e1e1e;
      --input-focus-bg: #292929;
      --input-text: #f1f1f1;
      --btn-bg-start: #00e0ff;
      --btn-bg-hover: #00c4e4;
      --result-bg: #1d1d1d;
      --credit-color: #666;
    }
    body.light {
      --bg-color: #fff;
      --text-color: #222;
      --heading-color: #007ea7;
      --subheading-color: #555;
      --input-bg: #fff;
      --input-focus-bg: #d0f0ff;
      --input-text: #222;
      --btn-bg-start: #007ea7;
      --btn-bg-hover: #005f7a;
      --result-bg: #e3f2fd;
      --credit-color: #999;
    }
    body {
      background: var(--bg-color);
      color: var(--text-color);
      font-family: 'Inter', sans-serif;
      padding: 40px;
      max-width: 700px; margin: auto;
      transition: background 0.4s, color 0.4s;
      position: relative;
    }
    h1 { font-family:'Orbitron'; font-size:32px; text-align:center; margin-bottom:5px; color:var(--heading-color); }
    h2 { font-size:16px; text-align:center; margin-bottom:30px; color:var(--subheading-color); }
    .input-group { display:grid; grid-template-columns:repeat(4,1fr); gap:20px; margin-bottom:20px; }
    .input-field { display:flex; flex-direction:column; }
    label { margin-bottom:5px; font-weight:600; }
    input { padding:10px; font-size:16px; border-radius:6px; border:1.5px solid transparent; background:var(--input-bg); color:var(--input-text); transition:0.3s; }
    input:focus { background:var(--input-focus-bg); border-color:var(--btn-bg-start); }
    button { width:100%; padding:12px; font-size:16px; background:var(--btn-bg-start); color:#000; border:none; border-radius:8px; font-weight:bold; cursor:pointer; transition:background 0.3s; }
    button:hover { background:var(--btn-bg-hover); }
    .warning { margin-top:10px; color:#ff4c4c; text-align:center; font-weight:bold; }
    .result { margin-top:30px; padding:20px; background:var(--result-bg); border-radius:10px; opacity:0; transition:opacity 0.5s; line-height:1.6; }
    .result.visible { opacity:1; }
    #countdown { margin-top:10px; font-weight:600; text-align:center; }
    #modeToggle { position:fixed; top:20px; right:20px; background:var(--btn-bg-start); border:none; border-radius:20px; width:60px; height:32px; cursor:pointer; font-size:18px; color:#000; display:flex; align-items:center; justify-content:center; transition:background 0.3s; }
    #modeToggle:hover { background:var(--btn-bg-hover); }
    .xp-bar-container { background:#333; border-radius:6px; overflow:hidden; height:24px; margin-top:20px; position:relative; }
    .xp-bar { background:var(--btn-bg-start); height:100%; width:0%; transition:width 0.1s linear; }
    .xp-label { text-align:center; margin-top:8px; font-size:14px; }
    .level-up { animation: levelUpAnim 0.5s ease-out; }
    @keyframes levelUpAnim {
      0% { transform: scale(1) }
      50% { transform: scale(1.2); background:yellow; }
      100% { transform: scale(1); background:transparent; }
    }
    .credit { text-align:center; margin-top:40px; color:var(--credit-color); font-size:14px; }
  </style>
</head>
<body>
  <button id="modeToggle">üåô</button>
  <h1>GAG Pet Age Calculator</h1>
  <h2>by Zecay ü§ò</h2>
  <div class="input-group">
    <div class="input-field"><label for="currentAge">Current Age</label><input id="currentAge" type="number" min="0"></div>
    <div class="input-field"><label for="targetAge">Target Age</label><input id="targetAge" type="number" min="0"></div>
    <div class="input-field"><label for="xps">XP per second</label><input id="xps" type="number" step="0.01" min="0"></div>
    <div class="input-field"><label for="currentXP">XP into current level</label><input id="currentXP" type="number" min="0"></div>
  </div>
  <button id="calculateBtn">Calculate Time</button>
  <div class="warning" id="warning"></div>
  <div class="result" id="output"></div>
  <div id="countdown"></div>
  <div class="xp-bar-container"><div id="xpBar" class="xp-bar"></div></div>
  <div class="xp-label" id="xpLabel">‚Äî</div>
  <div class="credit">üõ† Made with üíö ‚Äì 2025</div>

<script>
  const modeToggle = document.getElementById('modeToggle');
  const calculateBtn = document.getElementById('calculateBtn');
  const warning = document.getElementById('warning');
  const output = document.getElementById('output');
  const countdown = document.getElementById('countdown');
  const xpBar = document.getElementById('xpBar');
  const xpLabel = document.getElementById('xpLabel');
  let countdownInterval, xpInterval;

  modeToggle.addEventListener('click', () => {
    document.body.classList.toggle('light');
    modeToggle.textContent = document.body.classList.contains('light') ? 'üåû' : 'üåô';
  });

  function xpForAge(age) {
    return Math.floor(20 * Math.pow(age, 2.02));
  }
  function format(sec) {
    const d = Math.floor(sec/86400), h = Math.floor((sec%86400)/3600),
          m = Math.floor((sec%3600)/60), s = sec%60;
    return `${d}d ${h}h ${m}m ${s}s`;
  }

  calculateBtn.addEventListener('click', () => {
    clearInterval(countdownInterval);
    clearInterval(xpInterval);
    warning.textContent = '';
    output.classList.remove('visible');
    xpBar.style.width = '0%';
    xpLabel.textContent = '‚Äî';

    const a = +document.getElementById('currentAge').value;
    const b = +document.getElementById('targetAge').value;
    const rate = +document.getElementById('xps').value;
    let currXP = +document.getElementById('currentXP').value || 0;

    if(!Number.isFinite(a)||!Number.isFinite(b)||!Number.isFinite(rate)||b<=a||rate<=0){
      warning.textContent = '‚ö†Ô∏è please check inputs!';
      return;
    }

    let age = a;
    let totalXP = 0;
    for(let i=a+1;i<=b;i++) totalXP += xpForAge(i);
    const remainingXP = totalXP - currXP;
    let remainingSec = Math.floor(remainingXP/rate);

    output.innerHTML = `üß™ <strong>Total XP</strong>: ${remainingXP.toLocaleString()} XP<br>‚è≥ <strong>Time</strong>: ${format(remainingSec)}`;
    output.classList.add('visible');

    countdown.textContent = `‚è≥ Time left: ${format(remainingSec)}`;
    countdownInterval = setInterval(() => {
      remainingSec--;
      countdown.textContent = remainingSec>0 ? `‚è≥ Time left: ${format(remainingSec)}` : 'üéâ Done!';
      if(remainingSec<=0){
        clearInterval(countdownInterval);
      }
    },1000);

    let xpNeeded = xpForAge(age+1);
    xpLabel.textContent = `Level ${age} ‚Üí ${age+1} ‚Äî ${currXP}/${xpNeeded} XP`;
    xpBar.style.width = `${(currXP/xpNeeded)*100}%`;

    xpInterval = setInterval(() => {
      currXP += rate;
      if(currXP>=xpNeeded){
        currXP -= xpNeeded;
        age++;
        xpBar.classList.add('level-up');
        xpLabel.classList.add('level-up');
        setTimeout(() => { xpBar.classList.remove('level-up'); xpLabel.classList.remove('level-up'); },500);
        if(age>=b){
          xpBar.style.width = '100%';
          xpLabel.textContent = `Level ${b} reached!`;
          clearInterval(xpInterval);
          createConfetti();
          return;
        }
        xpNeeded = xpForAge(age+1);
      }
      xpBar.style.width = `${(currXP/xpNeeded)*100}%`;
      xpLabel.textContent = `Level ${age} ‚Üí ${age+1} ‚Äî ${Math.floor(currXP)}/${xpNeeded} XP`;
    },1000);
  });

  function createConfetti(){
    const colors=['#00e0ff','#ff4c4c','#ffd700','#7fff00','#ff69b4'];
    const cont=document.createElement('div');
    Object.assign(cont.style,{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',pointerEvents:'none',zIndex:9999});
    document.body.appendChild(cont);
    for(let i=0;i<150;i++){
      const c=document.createElement('div');
      Object.assign(c.style,{position:'absolute',width:'8px',height:'8px',background:colors[Math.floor(Math.random()*colors.length)],borderRadius:'50%',left:`${Math.random()*100}vw`,top:'-10px'});
      cont.appendChild(c);
      c.animate([{transform:'translateY(0)',opacity:1},{transform:'translateY(100vh)',opacity:0}],{duration:2000+Math.random()*2000,easing:'ease-out',fill:'forwards'});
    }
    setTimeout(()=>cont.remove(),5000);
  }
</script>
</body>
</html>
